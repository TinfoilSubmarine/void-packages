# Template file for 'dotnet-sdk-bin'
pkgname=dotnet-sdk-bin
version=5.0.400
revision=1
archs="x86_64 armv7 aarch64"
wrksrc="${pkgname}-${version}"
create_wrksrc=yes
short_desc="Provides the .NET SDK components, precompiled binaries"
maintainer="Joel Beckmeyer <joel@beckmeyer.us>"
license="MIT"
homepage="https://dotnet.microsoft.com"
nopie=yes

case "${XBPS_TARGET_MACHINE}" in
	x86_64)
	_arch="x64"
	_path="13b9d84c-a35b-4ffe-8f62-447a01403d64/1f9ae31daa0f7d98513e7551246899f2"
	distfiles="https://download.visualstudio.microsoft.com/download/pr/${_path}/dotnet-sdk-${version}-linux-${_arch}.tar.gz"
	checksum="0a7dc69528f09d6ccd49bbdbe5ce0e61a3d0becf44146467087f835b9d11928b"
	;;
	armv7l)
	_arch="arm"
	_path="70bdb5a9-34cc-4f28-aa33-15535f73b593/7d31d53187c8937206bcc3b117b88978"
	distfiles="https://download.visualstudio.microsoft.com/download/pr/${_path}/dotnet-sdk-${version}-linux-${_arch}.tar.gz"
	checksum="883b9ac1911464581bdd573385e59518607ccdb595438abd5d21b197814b5412"
	;;
	aarch64)
	_arch="arm64"
	_path="4d323232-ffcc-4c09-a043-a36b554c883e/096822e81dc29383b649cd015d1ff99a"
	distfiles="https://download.visualstudio.microsoft.com/download/pr/${_path}/dotnet-sdk-${version}-linux-${_arch}.tar.gz"
	checksum="62d5aa3cf191e60332037df54163876a526513e516da4b8309d61f4f43454796"
	;;
esac

_target='usr/lib/dotnet'

do_install() {
	vmkdir usr/bin
	ln -sf "/${_target}/dotnet" "${DESTDIR}/usr/bin/dotnet"
	vmkdir "${_target}"
	vcopy dotnet "${_target}"
	vcopy host "${_target}"
	vcopy shared "${_target}"
	vcopy sdk "${_target}"
	vlicense LICENSE.txt
}
